{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "order_step_classifier",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "intent",
    "confirm_answer",
    "change_target",
    "selection_number",
    "product_text",
    "branch_text",
    "date_text",
    "quantity",
    "confidence",
    "notes"
  ],
  "properties": {
    "intent": {
      "type": "string",
      "enum": [
        "select",
        "change",
        "confirm",
        "ask_options",
        "cancel",
        "unknown"
      ]
    },
    "confirm_answer": {
      "type": "string",
      "enum": [
        "yes",
        "no",
        "unknown"
      ]
    },
    "change_target": {
      "type": [
        "string",
        "null"
      ],
      "enum": [
        "product",
        "branch",
        "date",
        "quantity",
        null
      ]
    },
    "selection_number": {
      "type": [
        "integer",
        "null"
      ],
      "minimum": 1,
      "maximum": 50
    },
    "product_text": {
      "type": [
        "string",
        "null"
      ]
    },
    "branch_text": {
      "type": [
        "string",
        "null"
      ]
    },
    "date_text": {
      "type": [
        "string",
        "null"
      ]
    },
    "quantity": {
      "type": [
        "integer",
        "null"
      ],
      "minimum": 1,
      "maximum": 50
    },
    "confidence": {
      "type": "number",
      "minimum": 0,
      "maximum": 1
    },
    "notes": {
      "type": "string"
    }
  }
}